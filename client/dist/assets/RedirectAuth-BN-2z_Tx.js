const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CustomPageLoader-ByjXSgZJ.js","assets/index-BzDPl-ij.js","assets/index-DkG_Gxgb.css","assets/CustomPageLoader-DnXjx35T.css"])))=>i.map(i=>d[i]);
import{u as m,r,j as c,_ as g}from"./index-BzDPl-ij.js";const y=React.lazy(()=>g(()=>import("./CustomPageLoader-ByjXSgZJ.js"),__vite__mapDeps([0,1,2,3]))),u=e=>{try{return decodeURIComponent(escape(atob(e)))}catch{return e}},R=()=>{const e=m(),[l,o]=r.useState(!1),[d,a]=r.useState("Verifying authentication...");return r.useEffect(()=>{async function h(){const s=new URLSearchParams(e.search),f=u(s.get("redirect_url")||"/"),i={};for(const[t,p]of s.entries())t!=="redirect_url"&&t!=="redirect_type"&&(i[t]=u(p));const n="http://localhost/react-auth/public/logout";try{(await fetch("http://localhost:3030/api/proxy/set-auth",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)})).ok?(a("Authorization completed. Redirecting now..."),setTimeout(()=>{o(!0),setTimeout(()=>{window.location.href=f},800)},1e3)):(a("Authorization failed. Redirecting to login..."),o(!0),setTimeout(()=>{window.location.href=n},1800))}catch{a("Authorization failed. Redirecting to login..."),o(!0),setTimeout(()=>{window.location.href=n},1800)}}h()},[e]),c.jsx("div",{className:l?"loader-fade-out":"",children:c.jsx(y,{message:d})})};export{R as default};
